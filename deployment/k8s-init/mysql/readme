操作步骤：

每个节点执行init.sh

master执行apply.sh

进入主库mysql-0
kubectl exec -it mysql-0 -c mysql -- sh -c 'mysql -uroot -p$MYSQL_ROOT_PASSWORD'
更改root密码插件
alter user 'root'@'%' identified with 'mysql_native_password' by 'kcserver';
创建backup用户
create user 'backup'@'%' identified with 'mysql_native_password' by 'kcserver';
flush privileges;
查看master状态并记录下master_log_file和master_log_pos
show master status\G;

分别进入每个从库并执行
kubectl exec -it mysql-1 -c mysql -- sh -c 'mysql -uroot -p$MYSQL_ROOT_PASSWORD'
change master to master_host='mysql-master.default.svc.cluster.local',master_user='backup',master_password='kcserver',master_log_file='',master_log_pos=,master_port=3306;
# 启动从库同步
start slave;
# 查看从从库状态并确保Slave_IO_Running和Slave_SQL_Running都是Yes
show slave status\G;
如果同步不成功，尝试执行以下命令，然后再次重试
stop slave;
reset slave;

结果验证
在主库执行
create database test_db;
show databases;
在从库执行
show databases;
在主库执行
drop database test_db;
show databases;
在从库执行
show databases;
